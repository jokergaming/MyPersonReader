> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [blog.csdn.net](https://blog.csdn.net/weixin_43445935/article/details/107603240?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-1&spm=1001.2101.3001.4242)

> 指标的基本概念1、事务（Transaction）在web性能测试中，一个事务表示一个“从用户发送请求->web server接受到请求，进行处理-> web server向DB获取数据->生成用户的object(页面)，返回给用户”的过程，一般的响应时间都是针对事务而言的。2、请求响应时间请求响应时间指的是从客户端发起的一个请求开始，到客户端接收到从服务器端返回的响应结束，这个过程所耗费的时间，在某些工具中，响应通常会称为“TTLB”，即"Time To Last Byte"，意思

指标的基本概念
=======

1、事务（Transaction）
-----------------

在 web 性能测试中，一个事务表示一个 “从用户发送请求 ->web server 接受到请求，进行处理 -> web server 向 DB 获取数据 -> 生成用户的 object(页面)，返回给用户”的过程，一般的响应时间都是针对事务而言的。

2、请求响应时间
--------

请求响应时间指的是从客户端发起的一个请求开始，到客户端接收到从服务器端返回的响应结束，这个过程所耗费的时间，在某些工具中，响应通常会称为 “TTLB”，即 "Time To Last Byte"，意思是从发起一个请求开始，到客户端接收到最后一个字节的响应所耗费的时间，响应时间的单位一般为“秒” 或者“毫秒”。一个公式可以表示：响应时间＝网络响应时间 + 应用程序响应时间。

（1）在 1 秒钟之内，页面给予用户响应并有所显示，可认为是 “很不错的”；

（2）在 1~2 秒钟内，页面给予用户响应并有所显示，可认为是 “好的”；

（3）在 2~3 秒钟内，页面给予用户响应并有所显示，可认为是 “勉强接受的”；

（4）超过 3 秒就让人有点不耐烦了，用户很可能不会继续等待下去；

3、事务响应时间
--------

事务可能由一系列请求组成, 事务的响应时间主要是针对用户而言, 属于宏观上的概念，是为了向用户说明业务响应时间而提出的. 例如: 跨行取款事务的响应时间就是由一系列的请求组成的. 事务响应时间是直接衡量系统性能的参数.

4、并发用户数
-------

并发一般分为 2 种情况。一种是严格意义上的并发，即所有的用户在同一时刻做同一件事情或者操作，这种操作一般指做同一类型的业务。比如在信用卡审批业务中，一定数目的拥护在同一时刻对已经完成的审批业务进行提交；还有一种特例，即所有用户进行完全一样的 操作，例如在信用卡审批业务中，所有的用户可以一起申请业务，或者修改同一条记录。

另外一种并发是广义范围的并发。这种并发与前一种并发的区别是，尽管多个用户对系统发出了请求或者进行了操作，但是这些请求或者操作可以是相同的，也可以是不同的。对整个系统而言，仍然是有很多用户同时对系统进行操作，因此也属于并发的范畴。

可以看出，后一种并发是包含前一种并发的。而且后一种并发更接近用户的实际使用情况，因此对于大多数的系统，只有数量很少的用户进行 “严格意义上的并发”。对于 WEB 性能测试而言，这 2 种并发情况一般都需要进行测试，通常做法是先进行严格意义上的并发测试。严格意义上的用户并发一般发生在使用比较频繁的模块中，尽管发生的概率不是很大，但是一旦发生性能问题，后果很可能是致命的。严格意义上的并发测试往往和功能测试关联起来，因为并发功能遇到异常通常都是程序问题，这种测试也是健壮性和稳定性测试的一部分。

用户并发数量：关于用户并发的数量，有 2 种常见的错误观点。 一种错误观点是把并发用户数量理解为使用系统的全部用户的数量，理由是这些用户可能同时使用系统；还有一种比较接近正确的观点是把在线用户数量理解为并发用户数量。实际上在线用户也不一定会和其他用户发生并发，例如正在浏览网页的用户，对服务器没有任何影响，但是，在线用户数量是计算并发用户数量的主要依据之一。

5、吞吐量
-----

指的是在一次性能测试过程中网络上传输的数据量的总和. 吞吐量 / 传输时间, 就是吞吐率.

对于交互式应用来说，吞吐量指标反映的是服务器承受的压力，在容量规划的测试中，吞吐量是一个重点关注的指标，因为它能够说明系统级别的负载能力。

吞吐率：

单位时间内网络上传输的数据量，也可以指单位时间内处理客户请求数量。它是衡量网络性能的重要指标，通常情况下，吞吐率用 “字节数 / 秒” 来衡量，当然，你可以用 “请求数 / 秒” 和“页面数 / 秒”来衡量。其实，不管是一个请求还是一个页面，它的本质都是在网络上传输的数据，那么来表示数据的单位就是字节数。

不过以不同的方式表达的吞吐量可以说明不同层次的问题。例如，以字节数 / 秒方式表示的吞吐量主要受网络基础设置、服务器架构、应用服务器制约；以请求数 / 秒方式表示的吞吐量主要受应用服务器和应用代码的制约。

6、TPS（transaction per second）
-----------------------------

每秒钟系统能够处理的交易或者事务的数量. 它是衡量系统处理能力的重要指标.

7、点击率（Hit Per Second）
---------------------

每秒钟用户向 WEB 服务器提 交的 HTTP 请求数. 这个指标是 WEB 应用特有的一个指标: WEB 应用是 "请求 - 响应" 模式, 用户发出一次申请, 服务器就要处理一次, 所以点击是 WEB 应用能够处理的交易的最小单位. 如果把每次点击定义为一个交易, 点击率和 TPS 就是一个概念. 容易看出, 点击率越大, 对服务器的压力越大. 点击率只是一个性能参考指标, 重要的是分析点击时产生的影响。

需要注意的是, 这里的点击并非指鼠标的一次单击操作, 因为在一次单击操作中, 客户端可能向服务器发出多个 HTTP 请求.

点击率可以看做是 TPS 的一种特定情况。点击率更能体现用户端对服务器的压力。TPS 更能体现服务器对客户请求的处理能力。

8、资源利用率
-------

指的是对不同的系统资源的使用程度, 例如服务器的 CPU 利用率, 磁盘利用率等. 资源利用率是分析系统性能指标进而改善性能的主要依据, 因此是 WEB 性能测试工作的重点.

资源利用率主要针对 WEB 服务器, 操作系统, 数据库服务器, 网络等, 是测试和分析瓶颈的主要参考. 在 WEB 性能测试中, 更根据需要采集相应的参数进行分析。

通用指标（指 Web 应用服务器、数据库服务器必需测试项)
=============================

<table><thead><tr><th>指标</th><th>说明</th></tr></thead><tbody><tr><td>ProcessorTime</td><td>服务器 CPU 占用率，一般平均达到 70% 时，服务就接近饱和</td></tr><tr><td>Memory Available Mbyte</td><td>可用内存数，如果测试时发现内存有变化情况也要注意，如果是内存泄露则比较严重</td></tr><tr><td>Physicsdisk Time</td><td>物理磁盘读写时间情况</td></tr></tbody></table>

Web 服务器指标
---------

<table><thead><tr><th>指标</th><th>说明</th></tr></thead><tbody><tr><td>Requests Per Second（Avg Rps）</td><td>平均每秒钟响应次数＝总请求时间 / 秒数</td></tr><tr><td>Avg time to last byte per terstion （mstes)</td><td>平均每秒业务脚本的迭代次数 , 有人会把上面那个混淆</td></tr><tr><td>Successful Rounds</td><td>成功的请求</td></tr><tr><td>Failed Requests</td><td>失败的请求</td></tr><tr><td>Successful Hits</td><td>成功的点击次数</td></tr><tr><td>Failed Hits</td><td>失败的点击次数</td></tr><tr><td>Hits Per Second</td><td>每秒点击次数</td></tr><tr><td>Successful Hits Per Second</td><td>每秒成功的点击次数</td></tr><tr><td>Failed Hits Per Second</td><td>每秒失败的点击次数</td></tr><tr><td>Attempted Connections</td><td>尝试链接数</td></tr></tbody></table>

数据库服务器性能指标
----------

<table><thead><tr><th>指标</th><th>说明</th></tr></thead><tbody><tr><td>User 0 Connections</td><td>用户连接数，也就是数据库的连接数量</td></tr><tr><td>Number of deadlocks</td><td>数据库死锁</td></tr><tr><td>Butter Cache hit</td><td>数据库 Cache 的命中情况</td></tr></tbody></table>

系统的瓶颈定义
-------

<table><thead><tr><th>性能项</th><th>命令</th><th>指标</th></tr></thead><tbody><tr><td>CPU 限制</td><td>vmstat</td><td>当 %user+%sys 超过 80% 时</td></tr><tr><td>磁盘 I/O 限制</td><td>Vmstat</td><td>当 %iowait 超过 40%(AIX4.3.3 或更高版本) 时</td></tr><tr><td>应用磁盘限制</td><td>Iostat</td><td>当 %tm_act 超过 70% 时</td></tr><tr><td>虚存空间少</td><td>Lsps，-a</td><td>当分页空间的活动率超过 70% 时</td></tr><tr><td>换页限制</td><td>Iostat, stat</td><td>虚存逻辑卷 %tm_act 超过 I/O(iostat)的 30%，激活的虚存率超过 CPU 数量 (vmstat) 的 10 倍时</td></tr><tr><td>系统失效</td><td>Vmstat, sar</td><td>页交换增大、CPU 等待并运行队列</td></tr></tbody></table>

稳定系统的资源状态
---------

<table><tbody><tr><th>性能项</th><th>资源</th><th>评价</th></tr><tr><td rowspan="3">CPU 占用率</td><td>70%</td><td>好</td></tr><tr><td>85%</td><td>坏</td></tr><tr><td>90%+</td><td>很差</td></tr><tr><td rowspan="3">磁盘 I/0</td><td>&lt;30%</td><td>好</td></tr><tr><td>&lt;40%</td><td>坏</td></tr><tr><td>&lt;50%+</td><td>很差</td></tr><tr><td>网络</td><td>&lt;30% 带宽</td><td>好</td></tr><tr><td>运行队列</td><td>&lt;2*CPU 数量</td><td>好</td></tr><tr><td rowspan="3">内存</td><td>没有页交换</td><td>好</td></tr><tr><td>每个 CPU 每秒 10 个页交换</td><td>坏</td></tr><tr><td>更多的页交换</td><td>很差</td></tr></tbody></table>

接口性能要求
======

http 接口性能要求
-----------

<table><thead><tr><th>指标名称</th><th>要求</th><th>优先级</th><th>备注</th></tr></thead><tbody><tr><td>响应时间</td><td>500 millisecond</td><td>1</td><td></td></tr><tr><td>请求成功率</td><td>99%</td><td>2</td><td></td></tr><tr><td>TPS</td><td>在满足预期要求的情况下服务器状态稳定，单台服务器 TPS 要求在 1000 左右</td><td>3</td><td></td></tr><tr><td>资源使用率</td><td>要求在 TPS 正常幅度的情况下资源使用率幅度平稳，服务器状态平稳</td><td>3</td><td>要求接口的内部实现不能占用太多资源</td></tr><tr><td>数据库死锁</td><td>要求接口在使用过程中不会造成数据库死锁</td><td>1</td><td></td></tr><tr><td>CPU 限制</td><td>要求接口在使用过程中不会出现大量的计算</td><td>3</td><td></td></tr><tr><td>内存</td><td>要求接口在使用过程中不会出现内存大量消耗的情况</td><td>3</td><td></td></tr></tbody></table>

dubbo 接口性能要求
------------

<table><thead><tr><th>指标名称</th><th>要求</th><th>优先级</th><th>备注</th></tr></thead><tbody><tr><td>响应时间</td><td>500 millisecond</td><td>1</td><td></td></tr><tr><td>请求成功率</td><td>99%</td><td>2</td><td></td></tr><tr><td>TPS</td><td>在满足预期要求的情况下服务器状态稳定，单台服务器 TPS 要求在 1000 左右</td><td>3</td><td></td></tr><tr><td>资源使用率</td><td>要求在 TPS 正常幅度的情况下资源使用率幅度平稳，服务器状态平稳</td><td>3</td><td>要求接口的内部实现不能占用太多资源</td></tr><tr><td>数据库死锁</td><td>要求接口在使用过程中不会造成数据库死锁</td><td>1</td><td></td></tr><tr><td>CPU 限制</td><td>要求接口在使用过程中不会出现大量的计算</td><td>3</td><td></td></tr><tr><td>内存</td><td>要求接口在使用过程中不会出现内存大量消耗的情况</td><td>3</td><td></td></tr></tbody></table>